---

layout: default
title: mandelbrot

---

{% highlight c++ %}
// Tyler Mumford, 2014
// Draws the Mandelbrot fractal and save it to a file.

#include <iostream>
#include <fstream>
#include <cstdlib>
#include <cmath>
#include <complex>

using namespace std;

int iterate_pt (complex<double> c);

int main () {
	const double crmin = -0.75, crmax = -0.74, cimin = -0.138, cimax = -0.127;
	const int ncols = 600, nrows = 600;
	int Mandelbrot[ncols][nrows];
	int x, y;
	unsigned char color;

	complex<double> c, im (0.0,1.0);
	double dx = (crmax-crmin) / ncols, dy = (cimax-cimin) / nrows;

	for (y=0; y < nrows; y++) {
		for (x=0; x < ncols; x++) {
			c = (crmin+x*dx) + (cimin+y*dy)*im;
			Mandelbrot[x][y] = iterate_pt(c) + 65;
		}
	}

	fstream ppmFile;
	ppmFile.open("Mandelbrot.ppm", fstream::out);

	ppmFile << "P6\n" << ncols << " " << nrows << "\n1\n";
	for (x=0; x<ncols; x++) {
		for (y=0; y<nrows; y++) {
			color = char(Mandelbrot[x][y]);
			ppmFile.put(color);
			ppmFile.put(color);
			ppmFile.put(color);
		}
	}

	ppmFile.close();

	return 0;
}

int iterate_pt (complex<double> c) {
	complex<double> z (0.0, 0.0);
	int iterations = 0, k;
	for (k=1; k <= (255-64); k++) {
		z = z*z + c;
		if (sqrt(real(z*conj(z))) > 50)
			break;
		else
			++iterations;
	}
	return iterations;
}
{% endhighlight %}

<img src="Mandelbrot.jpg">
